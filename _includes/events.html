<div class="ui divided items">

{% if page.year == "current" %}
{% assign project_year = site.data.settings.current %}
{% else %}
{% assign project_year = page.year %}
{% endif %}

{% for event in events %}

{% if event.year > project_year %}
{% else %}

  {% assign year = event.year | append: "" %}

  {% if event.event_id %}
  {% assign type = "event" %}
  {% assign event_id = event.event_id %}
  {% assign item = site.data.events[year][event_id] %}

  {% elsif event.project_id %}
  {% assign type = "project" %}
  {% assign project_id = event.project_id %}
  {% assign item = site.data.projects[year][project_id] %}

  {% else %}
  {% assign type = "event" %}
  {% assign item = event %}

  {% endif %}

  {% include events_item.html %}

{% endif %}
{% endfor %}
</div>
